{
  "version": 3,
  "sources": ["../../src/public/js/modules/IndexedDBEngine.js"],
  "sourcesContent": ["/**\n * Classe pour g\u00E9rer le stockage dans IndexedDB.\n * Fournit des m\u00E9thodes pour cr\u00E9er, lire, mettre \u00E0 jour et supprimer des \u00E9l\u00E9ments.\n *\n * @class IndexedDBEngine\n */\nclass IndexedDBEngine {\n    constructor(dbName, storeName) {\n        this.dbName = dbName;\n        this.storeName = storeName;\n    }\n\n    /**\n     * Ouvre la base de donn\u00E9es IndexedDB.\n     * @returns {Promise<IDBDatabase>}\n     */\n    openDB() {\n        return new Promise((resolve, reject) => {\n            const request = indexedDB.open(this.dbName, 1);\n\n            request.onupgradeneeded = (event) => {\n                const db = event.target.result;\n                if (!db.objectStoreNames.contains(this.storeName)) {\n                    db.createObjectStore(this.storeName, { keyPath: 'id', autoIncrement: true });\n                }\n            };\n\n            request.onsuccess = (event) => {\n                resolve(event.target.result);\n            };\n\n            request.onerror = (event) => {\n                reject(new Error('Erreur lors de l\\'ouverture de la base de donn\u00E9es: ' + event.target.error));\n            };\n        });\n    }\n\n    /**\n     * Ajoute un \u00E9l\u00E9ment \u00E0 la base de donn\u00E9es.\n     * @param {Object} data - Les donn\u00E9es \u00E0 ajouter.\n     * @returns {Promise<number>} - L'ID de l'\u00E9l\u00E9ment ajout\u00E9.\n     */\n    addItem(data) {\n        return new Promise((resolve, reject) => {\n            this.openDB().then(db => {\n                const transaction = db.transaction([this.storeName], 'readwrite');\n                const store = transaction.objectStore(this.storeName);\n                const request = store.add(data);\n\n                request.onsuccess = () => {\n                    resolve(request.result);\n                };\n\n                request.onerror = () => {\n                    reject(new Error('Erreur lors de l\\'ajout des donn\u00E9es: ' + request.error));\n                };\n            }).catch(error => reject(error));\n        });\n    }\n\n    /**\n     * R\u00E9cup\u00E8re tous les \u00E9l\u00E9ments de la base de donn\u00E9es.\n     * @returns {Promise<Array>} - Un tableau d'\u00E9l\u00E9ments.\n     */\n    getAllItems() {\n        return new Promise((resolve, reject) => {\n            this.openDB().then(db => {\n                const transaction = db.transaction([this.storeName], 'readonly');\n                const store = transaction.objectStore(this.storeName);\n                const request = store.getAll();\n\n                request.onsuccess = () => {\n                    resolve(request.result);\n                };\n\n                request.onerror = () => {\n                    reject(new Error('Erreur lors de la r\u00E9cup\u00E9ration des donn\u00E9es: ' + request.error));\n                };\n            }).catch(error => reject(error));\n        });\n    }\n\n    /**\n     * Supprime un \u00E9l\u00E9ment de la base de donn\u00E9es par son ID.\n     * @param {number} id - L'ID de l'\u00E9l\u00E9ment \u00E0 supprimer.\n     * @returns {Promise<void>}\n     */\n    deleteItem(id) {\n        return new Promise((resolve, reject) => {\n            this.openDB().then(db => {\n                const transaction = db.transaction([this.storeName], 'readwrite');\n                const store = transaction.objectStore(this.storeName);\n                const request = store.delete(id);\n\n                request.onsuccess = () => {\n                    resolve();\n                };\n\n                request.onerror = () => {\n                    reject(new Error('Erreur lors de la suppression des donn\u00E9es: ' + request.error));\n                };\n            }).catch(error => reject(error));\n        });\n    }\n\n    /**\n     * Compte le nombre d'\u00E9l\u00E9ments dans la base de donn\u00E9es.\n     * @returns {Promise<number>}\n     */\n    getCount() {\n        return new Promise((resolve, reject) => {\n            this.openDB().then(db => {\n                const transaction = db.transaction([this.storeName], 'readonly');\n                const store = transaction.objectStore(this.storeName);\n                const request = store.count();\n\n                request.onsuccess = () => {\n                    resolve(request.result);\n                };\n\n                request.onerror = () => {\n                    reject(new Error('Erreur lors du comptage des donn\u00E9es: ' + request.error));\n                };\n            }).catch(error => reject(error));\n        });\n    }\n}\n\n// Exporter la classe pour les modules ES6\nexport default IndexedDBEngine;\n\n// Exposer la classe globalement pour les scripts traditionnels\nif (typeof window !== 'undefined') {\n    window.IndexedDBEngine = IndexedDBEngine;\n}\n"],
  "mappings": "AAMA,IAAMA,EAAN,KAAsB,CAClB,YAAYC,EAAQC,EAAW,CAC3B,KAAK,OAASD,EACd,KAAK,UAAYC,CACrB,CAMA,QAAS,CACL,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACpC,IAAMC,EAAU,UAAU,KAAK,KAAK,OAAQ,CAAC,EAE7CA,EAAQ,gBAAmBC,GAAU,CACjC,IAAMC,EAAKD,EAAM,OAAO,OACnBC,EAAG,iBAAiB,SAAS,KAAK,SAAS,GAC5CA,EAAG,kBAAkB,KAAK,UAAW,CAAE,QAAS,KAAM,cAAe,EAAK,CAAC,CAEnF,EAEAF,EAAQ,UAAaC,GAAU,CAC3BH,EAAQG,EAAM,OAAO,MAAM,CAC/B,EAEAD,EAAQ,QAAWC,GAAU,CACzBF,EAAO,IAAI,MAAM,wDAAwDE,EAAM,OAAO,KAAK,CAAC,CAChG,CACJ,CAAC,CACL,CAOA,QAAQE,EAAM,CACV,OAAO,IAAI,QAAQ,CAACL,EAASC,IAAW,CACpC,KAAK,OAAO,EAAE,KAAKG,GAAM,CAGrB,IAAMF,EAFcE,EAAG,YAAY,CAAC,KAAK,SAAS,EAAG,WAAW,EACtC,YAAY,KAAK,SAAS,EAC9B,IAAIC,CAAI,EAE9BH,EAAQ,UAAY,IAAM,CACtBF,EAAQE,EAAQ,MAAM,CAC1B,EAEAA,EAAQ,QAAU,IAAM,CACpBD,EAAO,IAAI,MAAM,0CAA0CC,EAAQ,KAAK,CAAC,CAC7E,CACJ,CAAC,EAAE,MAAMI,GAASL,EAAOK,CAAK,CAAC,CACnC,CAAC,CACL,CAMA,aAAc,CACV,OAAO,IAAI,QAAQ,CAACN,EAASC,IAAW,CACpC,KAAK,OAAO,EAAE,KAAKG,GAAM,CAGrB,IAAMF,EAFcE,EAAG,YAAY,CAAC,KAAK,SAAS,EAAG,UAAU,EACrC,YAAY,KAAK,SAAS,EAC9B,OAAO,EAE7BF,EAAQ,UAAY,IAAM,CACtBF,EAAQE,EAAQ,MAAM,CAC1B,EAEAA,EAAQ,QAAU,IAAM,CACpBD,EAAO,IAAI,MAAM,wDAAiDC,EAAQ,KAAK,CAAC,CACpF,CACJ,CAAC,EAAE,MAAMI,GAASL,EAAOK,CAAK,CAAC,CACnC,CAAC,CACL,CAOA,WAAWC,EAAI,CACX,OAAO,IAAI,QAAQ,CAACP,EAASC,IAAW,CACpC,KAAK,OAAO,EAAE,KAAKG,GAAM,CAGrB,IAAMF,EAFcE,EAAG,YAAY,CAAC,KAAK,SAAS,EAAG,WAAW,EACtC,YAAY,KAAK,SAAS,EAC9B,OAAOG,CAAE,EAE/BL,EAAQ,UAAY,IAAM,CACtBF,EAAQ,CACZ,EAEAE,EAAQ,QAAU,IAAM,CACpBD,EAAO,IAAI,MAAM,iDAAgDC,EAAQ,KAAK,CAAC,CACnF,CACJ,CAAC,EAAE,MAAMI,GAASL,EAAOK,CAAK,CAAC,CACnC,CAAC,CACL,CAMA,UAAW,CACP,OAAO,IAAI,QAAQ,CAACN,EAASC,IAAW,CACpC,KAAK,OAAO,EAAE,KAAKG,GAAM,CAGrB,IAAMF,EAFcE,EAAG,YAAY,CAAC,KAAK,SAAS,EAAG,UAAU,EACrC,YAAY,KAAK,SAAS,EAC9B,MAAM,EAE5BF,EAAQ,UAAY,IAAM,CACtBF,EAAQE,EAAQ,MAAM,CAC1B,EAEAA,EAAQ,QAAU,IAAM,CACpBD,EAAO,IAAI,MAAM,2CAA0CC,EAAQ,KAAK,CAAC,CAC7E,CACJ,CAAC,EAAE,MAAMI,GAASL,EAAOK,CAAK,CAAC,CACnC,CAAC,CACL,CACJ,EAGOE,EAAQX,EAGX,OAAO,QAAW,cAClB,OAAO,gBAAkBA",
  "names": ["IndexedDBEngine", "dbName", "storeName", "resolve", "reject", "request", "event", "db", "data", "error", "id", "IndexedDBEngine_default"]
}
