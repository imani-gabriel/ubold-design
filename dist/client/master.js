function s(e,t,a=void 0,i,n=void 0,o=void 0){$.ajax({type:e,url:t,dataType:"json",data:a,processData:n,contentType:o,success:i})}function r(e){e.flash&&$("#items-"+e.id).remove(),console.log($(".taskmgr-items-list").is(":empty"),e),$(".taskmgr-items-list").is(":empty")&&$(".taskmgr-items-list").append(`<div class="input-group alert-danger alert">Aucune tache n'est ajout\xE9e jusque l\xE0</div>`)}function c(e){e.length!==0&&$("#field-taskeditor a").attr({onclick:"return updateTask(this)"}),$("#field-taskeditor a").attr({id:`btn-addtask-${e.id}`}),$("#field-taskeditor a").html('<span class="icon icon-pencil"> Editer'),$("#field-taskeditor input").val(e.title)}function l(e){let t=e.task;e.flash&&($("#field-taskeditor a").html('<span class="icon icon-plus"> Ajouter'),$("#field-taskeditor a").attr({id:"btn-addtask"}),$("#field-taskeditor input").val(""),$("#field-taskeditor a").attr({onclick:"return newTask(this)"}),$(`#items-${t.id} p`).text(t.title))}function d(e){$(".input-group.alert").is(":visible")&&$(".input-group.alert").remove(),$(".taskmgr-items-list").append(`
            <div class="input-group form-control-sm col-md-12" id="items-${e.id}">
                <p class="align-items-center">${e.title}</p>
                <a onclick="return gettask(this)" href="#!" title="${e.idUser}" id="btn-addtask-${e.id}" class="btn btn-success btn-sm"><span class="icon icon-pencil"></a>
                <a onclick="return movetask(this)" href="#!" title="${e.idUser}" id="btn-addtask-${e.id}" class="btn btn-danger btn-sm"><span class="icon icon-bin"></a>
            </div>
        `),$("#newtask").val("")}function u(e){console.log("Archive created : ",e.data)}captureMedia=function(e){window.URL&&typeof window.URL.createObjectURL!="undefined"?sourceD=window.URL.createObjectURL(e.target.files[0]):window.webkitURL&&typeof window.webkitURL.createObjectURL!="undefined"&&(sourceD=window.webkitURL.createObjectURL(e.target.files[0])),e.target.files[0].type.split("/")[0]=="image"?(console.log("capture image"),$(".user-avatar-img").css({backgroundImage:`url(${sourceD})`,title:"Proto de profile",alt:"Pas de photo sur le profile"})):alert("Element non-autoris\xE9")};movetask=function(e){let t={id:$(e).attr("id").split("-")[2]};s("POST",siteUrl+"task/moveTask",t,r)};gettask=function(e){let t={id:$(e).attr("id").split("-")[2]};s("POST",siteUrl+"task/gettaskone",t,c)};updateTask=function(e){let t={id:$(e).attr("id").split("-")[2],title:$("#newtask").val()};s("POST",siteUrl+"task/updateTask",t,l)};newTask=function(){let e={title:$("#newtask").val(),idUser:parseInt($("input[name=idUser]").attr("id"))};if($("#newtask").val()==="")return alert("Remplissez bien le champ d'ajout des t\xE2ches");s("POST",siteUrl+"task/newTask",e,d)};usersToAssign=function(){return JSON.parse(localStorage.getItem("users")).map(t=>`<option value="${t._id}">${t.fullname}</option>`).join("")};$("#create-holder").on("click",function(e){e.preventDefault(),$(".scope-formUser").is(":visible")&&$(".scope-formUser").hide(),$(".scope-formDoc").not(":visible")&&$(".scope-formDoc").fadeIn(),$("select#userToAssign").append(usersToAssign())});$("#add-user").on("click",function(e){e.preventDefault(),$(".scope-formDoc").is(":visible")&&$(".scope-formDoc").hide(),$(".scope-formUser").not(":visible")&&$(".scope-formUser").fadeIn()});$("#user-avatar").on("change",function(e){captureMedia(e)});createUser=function(e){var t=new FormData,a=[],i=[];return $(e).find("input[type!='submit'], select").each(function(){$(this).val()==""||$(this).val()=="0"?i.push([$(this).attr("id")]):a[$(this).attr("id")]=$(this).val()}),userDataObj=Object.assign({},a),i.length!==0?(i.forEach(n=>{$("#"+n).css({borderColor:"red",boxShadow:"0 0 5.25px red"})}),!1):(t.append("obsFile",$("#user-avatar")[0].files[0]),t.append("userData",JSON.stringify(userDataObj)),s("PUT","create-user",t,u,!1,!1),i.length===0&&console.log("clean"),!1)};
//# sourceMappingURL=master.js.map
