{
  "version": 3,
  "sources": ["../../src/public/js/master.js"],
  "sourcesContent": ["\r\n    function itemsFormated(params) {\r\n        return params.map(tsk => {\r\n            return `<div class=\"input-group form-control-sm col-md-12\" id=\"items-${tsk.id}\">\r\n                <p class=\" align-items-center\">${tsk.title}</p>\r\n                <a onclick=\"return gettask(this)\" href=\"#!\" title=\"${tsk.idUser}\" id=\"btn-addtask-${tsk.id}\" class=\"btn btn-success btn-sm\"><span class=\"icon icon-pencil\"></a>\r\n                <a onclick=\"return movetask(this)\" href=\"#!\" title=\"${tsk.idUser}\" id=\"btn-addtask-${tsk.id}\" class=\"btn btn-danger btn-sm\"><span class=\"icon icon-bin\"></a>\r\n            </div>`\r\n        }).join('');\r\n    }\r\n\r\n    function ajaxServer(type, url, data = undefined, feedback, processData = undefined, contentType = undefined) {\r\n        $.ajax({ type, url, dataType: \"json\", data, processData, contentType, success: feedback });\r\n    }\r\n\r\n    function feedbackStarted(res) {\r\n        console.log('response alert', JSON.parse(res.users));\r\n        localStorage.setItem('users', res.users)\r\n    }\r\n\r\n    function feedbackMoveTask(res) {\r\n        if (res.flash) $('#items-' + res.id).remove();\r\n        console.log($('.taskmgr-items-list').is(':empty'), res);\r\n        if ($('.taskmgr-items-list').is(':empty')) $('.taskmgr-items-list').append(`<div class=\"input-group alert-danger alert\">Aucune tache n'est ajout\u00E9e jusque l\u00E0</div>`)\r\n    }\r\n\r\n    function feedbackGetTask(res) {\r\n        if (res.length !== 0) $('#field-taskeditor a').attr({ onclick: \"return updateTask(this)\" });\r\n        $('#field-taskeditor a').attr({ id: `btn-addtask-${res.id}` })\r\n        $('#field-taskeditor a').html('<span class=\"icon icon-pencil\"> Editer')\r\n        $('#field-taskeditor input').val(res.title)\r\n    }\r\n\r\n    function feedbackUpdateTask(res) {\r\n        let task = res.task\r\n        if (res.flash) {\r\n            $('#field-taskeditor a').html('<span class=\"icon icon-plus\"> Ajouter')\r\n            $('#field-taskeditor a').attr({ id: `btn-addtask` })\r\n            $('#field-taskeditor input').val('')\r\n            $('#field-taskeditor a').attr({ onclick: \"return newTask(this)\" })\r\n            $(`#items-${task.id} p`).text(task.title)\r\n        }\r\n    }\r\n\r\n    function feedbackNewTask(res) {\r\n        if ($('.input-group.alert').is(':visible')) $('.input-group.alert').remove();\r\n        $('.taskmgr-items-list').append(`\r\n            <div class=\"input-group form-control-sm col-md-12\" id=\"items-${res.id}\">\r\n                <p class=\"align-items-center\">${res.title}</p>\r\n                <a onclick=\"return gettask(this)\" href=\"#!\" title=\"${res.idUser}\" id=\"btn-addtask-${res.id}\" class=\"btn btn-success btn-sm\"><span class=\"icon icon-pencil\"></a>\r\n                <a onclick=\"return movetask(this)\" href=\"#!\" title=\"${res.idUser}\" id=\"btn-addtask-${res.id}\" class=\"btn btn-danger btn-sm\"><span class=\"icon icon-bin\"></a>\r\n            </div>\r\n        `)\r\n        $('#newtask').val(\"\");\r\n    }\r\n\r\n    function feedbackCreateUser(res) {\r\n        console.log('Archive created : ', res.data)\r\n    }\r\n\r\n    /* (function () {\r\n       // if (userID) return ajaxServer(\"GET\", 'mgr/getUserAll', null,feedbackStarted)\r\n    }()); */\r\n\r\n    captureMedia = function (e) {\r\n\r\n        if (window.URL && typeof window.URL.createObjectURL !== 'undefined') {\r\n            sourceD = window.URL.createObjectURL(e.target.files[0]);\r\n        } else if (window.webkitURL && typeof window.webkitURL.createObjectURL !== 'undefined') {\r\n            sourceD = window.webkitURL.createObjectURL(e.target.files[0]);\r\n        }\r\n\r\n        if ((e.target.files[0].type.split('/'))[0] == \"image\") {\r\n            console.log(\"capture image\");\r\n            $(\".user-avatar-img\")\r\n                .css({\r\n                    backgroundImage: `url(${sourceD})`,\r\n                    title: \"Proto de profile\",\r\n                    alt: \"Pas de photo sur le profile\"\r\n                });\r\n        } else {\r\n            alert('Element non-autoris\u00E9');\r\n        }\r\n    }\r\n\r\n    movetask = function (self) {\r\n        const data = { id: $(self).attr(\"id\").split('-')[2] };\r\n        ajaxServer(\"POST\", siteUrl + 'task/moveTask', data, feedbackMoveTask)\r\n    }\r\n\r\n    gettask = function (self) {\r\n        const data = { id: $(self).attr(\"id\").split('-')[2] };\r\n        ajaxServer(\"POST\", siteUrl + 'task/gettaskone', data, feedbackGetTask)\r\n    }\r\n\r\n    updateTask = function (self) {\r\n        const data = { id: $(self).attr(\"id\").split('-')[2], title: $('#newtask').val() };\r\n        ajaxServer(\"POST\", siteUrl + 'task/updateTask', data, feedbackUpdateTask)\r\n    }\r\n\r\n    newTask = function () {\r\n        const data = { title: $('#newtask').val(), idUser: parseInt($('input[name=idUser]').attr('id')) };\r\n        if ($('#newtask').val() === '') return alert(\"Remplissez bien le champ d'ajout des t\u00E2ches\");\r\n        ajaxServer(\"POST\", siteUrl + 'task/newTask', data, feedbackNewTask)\r\n    }\r\n\r\n    //============= USING LOCALSTORAGE ============\r\n\r\n    usersToAssign = function () {\r\n        const users = JSON.parse(localStorage.getItem('users'))\r\n        return users.map(user => `<option value=\"${user._id}\">${user.fullname}</option>`).join('');\r\n    }\r\n\r\n\r\n\r\n    //============= DECLENCHEMENT DE EVENTS ===========\r\n\r\n    $('#create-holder').on('click', function (evt) {\r\n        evt.preventDefault();\r\n        if ($('.scope-formUser').is(':visible')) $('.scope-formUser').hide();\r\n        if ($('.scope-formDoc').not(':visible')) $('.scope-formDoc').fadeIn();\r\n        $('select#userToAssign').append(usersToAssign())\r\n    })\r\n\r\n    $('#add-user').on('click', function (evt) {\r\n        evt.preventDefault();\r\n        if ($('.scope-formDoc').is(':visible')) $('.scope-formDoc').hide();\r\n        if ($('.scope-formUser').not(':visible')) $('.scope-formUser').fadeIn();\r\n    })\r\n\r\n    //                      FORM PROCESS \r\n    // ============  FORM CREATE - ARCHIVES VIDEO ============\r\n\r\n    $(\"#user-avatar\").on('change', function (e) { captureMedia(e) });\r\n\r\n    createUser = function (form) {\r\n        var oData = new FormData()\r\n            , userData = [], errorField = [];\r\n\r\n        $(form).find(\"input[type!='submit'], select\").each(function () {\r\n            if ($(this).val() == '' || $(this).val() == '0')\r\n                errorField.push([$(this).attr('id')])\r\n            else userData[$(this).attr('id')] = $(this).val()\r\n        })\r\n        \r\n        userDataObj = Object.assign({}, userData)\r\n\r\n        if (errorField.length !== 0) {\r\n            errorField.forEach((e) => { $('#' + e).css({ \"borderColor\": \"red\", \"boxShadow\": \"0 0 5.25px red\" }) })\r\n            return false;\r\n        }\r\n\r\n        oData.append(\"obsFile\", $(\"#user-avatar\")[0].files[0]);\r\n        oData.append(\"userData\", JSON.stringify(userDataObj));\r\n\r\n        ajaxServer(\"PUT\", 'create-user', oData, feedbackCreateUser, false, false)\r\n        \r\n        if (errorField.length === 0) console.log('clean');//form.reset()\r\n        return false;\r\n\r\n    }\r\n\r\n"],
  "mappings": "AAWI,SAASA,EAAWC,EAAMC,EAAKC,EAAO,OAAWC,EAAUC,EAAc,OAAWC,EAAc,OAAW,CACzG,EAAE,KAAK,CAAE,KAAAL,EAAM,IAAAC,EAAK,SAAU,OAAQ,KAAAC,EAAM,YAAAE,EAAa,YAAAC,EAAa,QAASF,CAAS,CAAC,CAC7F,CAOA,SAASG,EAAiBC,EAAK,CACvBA,EAAI,OAAO,EAAE,UAAYA,EAAI,EAAE,EAAE,OAAO,EAC5C,QAAQ,IAAI,EAAE,qBAAqB,EAAE,GAAG,QAAQ,EAAGA,CAAG,EAClD,EAAE,qBAAqB,EAAE,GAAG,QAAQ,GAAG,EAAE,qBAAqB,EAAE,OAAO,8FAAwF,CACvK,CAEA,SAASC,EAAgBD,EAAK,CACtBA,EAAI,SAAW,GAAG,EAAE,qBAAqB,EAAE,KAAK,CAAE,QAAS,yBAA0B,CAAC,EAC1F,EAAE,qBAAqB,EAAE,KAAK,CAAE,GAAI,eAAeA,EAAI,EAAE,EAAG,CAAC,EAC7D,EAAE,qBAAqB,EAAE,KAAK,wCAAwC,EACtE,EAAE,yBAAyB,EAAE,IAAIA,EAAI,KAAK,CAC9C,CAEA,SAASE,EAAmBF,EAAK,CAC7B,IAAIG,EAAOH,EAAI,KACXA,EAAI,QACJ,EAAE,qBAAqB,EAAE,KAAK,uCAAuC,EACrE,EAAE,qBAAqB,EAAE,KAAK,CAAE,GAAI,aAAc,CAAC,EACnD,EAAE,yBAAyB,EAAE,IAAI,EAAE,EACnC,EAAE,qBAAqB,EAAE,KAAK,CAAE,QAAS,sBAAuB,CAAC,EACjE,EAAE,UAAUG,EAAK,EAAE,IAAI,EAAE,KAAKA,EAAK,KAAK,EAEhD,CAEA,SAASC,EAAgBJ,EAAK,CACtB,EAAE,oBAAoB,EAAE,GAAG,UAAU,GAAG,EAAE,oBAAoB,EAAE,OAAO,EAC3E,EAAE,qBAAqB,EAAE,OAAO;AAAA,2EACmCA,EAAI,EAAE;AAAA,gDACjCA,EAAI,KAAK;AAAA,qEACYA,EAAI,MAAM,qBAAqBA,EAAI,EAAE;AAAA,sEACpCA,EAAI,MAAM,qBAAqBA,EAAI,EAAE;AAAA;AAAA,SAElG,EACD,EAAE,UAAU,EAAE,IAAI,EAAE,CACxB,CAEA,SAASK,EAAmBL,EAAK,CAC7B,QAAQ,IAAI,qBAAsBA,EAAI,IAAI,CAC9C,CAMA,aAAe,SAAU,EAAG,CAEpB,OAAO,KAAO,OAAO,OAAO,IAAI,iBAAoB,YACpD,QAAU,OAAO,IAAI,gBAAgB,EAAE,OAAO,MAAM,CAAC,CAAC,EAC/C,OAAO,WAAa,OAAO,OAAO,UAAU,iBAAoB,cACvE,QAAU,OAAO,UAAU,gBAAgB,EAAE,OAAO,MAAM,CAAC,CAAC,GAG3D,EAAE,OAAO,MAAM,CAAC,EAAE,KAAK,MAAM,GAAG,EAAG,CAAC,GAAK,SAC1C,QAAQ,IAAI,eAAe,EAC3B,EAAE,kBAAkB,EACf,IAAI,CACD,gBAAiB,OAAO,OAAO,IAC/B,MAAO,mBACP,IAAK,6BACT,CAAC,GAEL,MAAM,yBAAsB,CAEpC,EAEA,SAAW,SAAUM,EAAM,CACvB,IAAMC,EAAO,CAAE,GAAI,EAAED,CAAI,EAAE,KAAK,IAAI,EAAE,MAAM,GAAG,EAAE,CAAC,CAAE,EACpDE,EAAW,OAAQ,QAAU,gBAAiBD,EAAMR,CAAgB,CACxE,EAEA,QAAU,SAAUO,EAAM,CACtB,IAAMC,EAAO,CAAE,GAAI,EAAED,CAAI,EAAE,KAAK,IAAI,EAAE,MAAM,GAAG,EAAE,CAAC,CAAE,EACpDE,EAAW,OAAQ,QAAU,kBAAmBD,EAAMN,CAAe,CACzE,EAEA,WAAa,SAAUK,EAAM,CACzB,IAAMC,EAAO,CAAE,GAAI,EAAED,CAAI,EAAE,KAAK,IAAI,EAAE,MAAM,GAAG,EAAE,CAAC,EAAG,MAAO,EAAE,UAAU,EAAE,IAAI,CAAE,EAChFE,EAAW,OAAQ,QAAU,kBAAmBD,EAAML,CAAkB,CAC5E,EAEA,QAAU,UAAY,CAClB,IAAMK,EAAO,CAAE,MAAO,EAAE,UAAU,EAAE,IAAI,EAAG,OAAQ,SAAS,EAAE,oBAAoB,EAAE,KAAK,IAAI,CAAC,CAAE,EAChG,GAAI,EAAE,UAAU,EAAE,IAAI,IAAM,GAAI,OAAO,MAAM,gDAA6C,EAC1FC,EAAW,OAAQ,QAAU,eAAgBD,EAAMH,CAAe,CACtE,EAIA,cAAgB,UAAY,CAExB,OADc,KAAK,MAAM,aAAa,QAAQ,OAAO,CAAC,EACzC,IAAIK,GAAQ,kBAAkBA,EAAK,GAAG,KAAKA,EAAK,QAAQ,WAAW,EAAE,KAAK,EAAE,CAC7F,EAMA,EAAE,gBAAgB,EAAE,GAAG,QAAS,SAAUC,EAAK,CAC3CA,EAAI,eAAe,EACf,EAAE,iBAAiB,EAAE,GAAG,UAAU,GAAG,EAAE,iBAAiB,EAAE,KAAK,EAC/D,EAAE,gBAAgB,EAAE,IAAI,UAAU,GAAG,EAAE,gBAAgB,EAAE,OAAO,EACpE,EAAE,qBAAqB,EAAE,OAAO,cAAc,CAAC,CACnD,CAAC,EAED,EAAE,WAAW,EAAE,GAAG,QAAS,SAAUA,EAAK,CACtCA,EAAI,eAAe,EACf,EAAE,gBAAgB,EAAE,GAAG,UAAU,GAAG,EAAE,gBAAgB,EAAE,KAAK,EAC7D,EAAE,iBAAiB,EAAE,IAAI,UAAU,GAAG,EAAE,iBAAiB,EAAE,OAAO,CAC1E,CAAC,EAKD,EAAE,cAAc,EAAE,GAAG,SAAU,SAAU,EAAG,CAAE,aAAa,CAAC,CAAE,CAAC,EAE/D,WAAa,SAAUC,EAAM,CACzB,IAAIC,EAAQ,IAAI,SACVC,EAAW,CAAC,EAAGC,EAAa,CAAC,EAUnC,OARA,EAAEH,CAAI,EAAE,KAAK,+BAA+B,EAAE,KAAK,UAAY,CACvD,EAAE,IAAI,EAAE,IAAI,GAAK,IAAM,EAAE,IAAI,EAAE,IAAI,GAAK,IACxCG,EAAW,KAAK,CAAC,EAAE,IAAI,EAAE,KAAK,IAAI,CAAC,CAAC,EACnCD,EAAS,EAAE,IAAI,EAAE,KAAK,IAAI,CAAC,EAAI,EAAE,IAAI,EAAE,IAAI,CACpD,CAAC,EAED,YAAc,OAAO,OAAO,CAAC,EAAGA,CAAQ,EAEpCC,EAAW,SAAW,GACtBA,EAAW,QAASC,GAAM,CAAE,EAAE,IAAMA,CAAC,EAAE,IAAI,CAAE,YAAe,MAAO,UAAa,gBAAiB,CAAC,CAAE,CAAC,EAC9F,KAGXH,EAAM,OAAO,UAAW,EAAE,cAAc,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,EACrDA,EAAM,OAAO,WAAY,KAAK,UAAU,WAAW,CAAC,EAEpDJ,EAAW,MAAO,cAAeI,EAAOP,EAAoB,GAAO,EAAK,EAEpES,EAAW,SAAW,GAAG,QAAQ,IAAI,OAAO,EACzC,GAEX",
  "names": ["ajaxServer", "type", "url", "data", "feedback", "processData", "contentType", "feedbackMoveTask", "res", "feedbackGetTask", "feedbackUpdateTask", "task", "feedbackNewTask", "feedbackCreateUser", "self", "data", "ajaxServer", "user", "evt", "form", "oData", "userData", "errorField", "e"]
}
